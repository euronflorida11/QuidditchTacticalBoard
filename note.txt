＃ 要望
以下の要件に基づいて、以下のHTML、CSS、JavaScriptファイルを参考にして、それぞれ完璧なコーディングをして。

前提として、タッチデバイスか非タッチデバイスかを判別し、以降の処理に対応させる。

1. 全体設計
画面構成
・画面上に固定表示される作戦ボード:クアッドボールのフィールド（33m×60m）を正確に再現し、フィールド上に各ポジションの選手を配置可能。
・各ポジションの色分け（キーパーは緑、チェイサーは白、ビーターは黒、シーカーは黄色のヘッドバンド表示）​。
・フィールドは、デバイスの一画面内いっぱいいっぱいに収まるようにスケーリングする。

2. フィールド仕様
フィールド表示：フィールドはクアッドボールの公式サイズに基づき、次の寸法を明示​：
・サイドライン：60m
・エンドライン：33m
・センターライン：フィールドの長さ（60m）の中央を横切る線
・ゴールライン：センターラインから16.5mの位置に両サイドに配置
・キーパーゾーンライン：センターラインから11mの位置に両サイドに配置
・3つのフープ（ショートフープ89～93cm、ミディアムフープ135～139cm、トールフープ181～185cm）をゴールラインに配置​。

3. プレイヤーの配置と操作

・プレイヤーの配置：各チーム最大7人のプレイヤーをピッチ上に配置可能（キーパー1人、チェイサー3人、ビーター2人、シーカー1人）。
・プレイヤーアイコンに名前、ポジション、番号、ヘッドバンドの色を表示。
進行方向がわかりやすい工夫
プレイヤーアイコンは三角形で表示し、進行方向を示す。

・プレイヤーの移動
ドラッグ＆ドロップによるプレイヤーの位置変更。
移動可能範囲はフィールド内に制限する。

4. ボール操作

ボールの種類：クァッフル（チェイサー用）、ブラッジャー（ビーター用）を管理し、それぞれ自分が扱えるボールのみ吸着する​。

ボールの保持と移動
ボールはプレイヤーにドラッグ＆ドロップで持たせる。プレイヤーアイコンがボールに近づくと吸着する。

5. UI/UXの要件
レスポンシブデザイン

デスクトップおよびタブレット端末で使用可能なレイアウトを設計し、操作性を考慮したレスポンシブデザインを採用。
タッチ/非タッチデバイスの判別

タッチデバイス（スマートフォン、タブレット）と非タッチデバイス（PC、ラップトップ）を自動判別し、それぞれに応じた動作を制御。
タッチデバイス: タッチジェスチャーによる操作（タップ、スワイプ、ピンチ操作など）をサポートし、快適な操作感を提供。
非タッチデバイス: マウスとキーボードによる操作を最適化し、ドラッグ＆ドロップなどのインタラクションをスムーズに実行。
便利な操作ボタンの追加

「戻る」ボタン：1つ前のプレイヤーの位置やボールの操作を取り消す機能。
「進む」ボタン：戻した操作を再度適用する機能。
「リセット」ボタン：現在のフィールドの状態を初期状態にリセットする機能。
チームカラーと視認性

各チームの選手に異なるチームカラーを付け、視認性の高いデザインを提供。
プレイヤー、ボール、ゴールの色や形を直感的に認識できるように工夫。

---------------------------------------------------------------------------------------------------------------------------




#条件
・画面上部の余白は狭くする
・背景は、暗いイメージ
・背景には、箒に乗った魔法使いやディメンターが魔法を撃ち合いながら戦っている様子を動的に表現する
・プレイヤーとボールの配置の「リセット」ボタンを追加
・プレイヤーの三角の下には、小さい文字で「Player」とナンバリングを記載する
・ 「Draw Mode」の際には、太め線で自由に手書きができる
・ 「Draw Mode」の際には、「戻る」と「やり直す」ボタン機能を追加
・ 「Move Mode」の際には、プレイヤーの近くにボールが存在する場合、プレイヤーを動かすときには、ボールも同時に移動させる。

・UIで、画面下部には、流体のような魔法が常に流れていくような動的なフロントエンドにして
・ 「Undo」と「Redo」ボタンは、「Move Mode」と「Draw Mode」ともに常に表示して。
・ 「Draw Mode」で、線を描くときは、直線ではなく、フリーペイントにして

・画面下部に魔法の流れを動的に表現する要素を追加できていない
・ 「Draw Mode」での描画を直線ではなくフリーペイントに変更できてないよ。
・背景を暗い色にし、魔法使いやディメンターが戦う背景アニメーションを追加できてない。
・UIをよりスポーティでかっこよくするために、ボタンのホバースタイルやアニメーションを追加できていない
・ 「Move Mode」でプレイヤーとボールの動きが同期しない
・Player名は書き換えられるようにしたい。
・プレイヤーの複数選択機能を追加したい。
・ 「オールコートモード」と「ハーフコートモード」を切り替えたい。
・ 「Undo」と「Redo」ボタンの適用範囲は「Move Mode」と「Draw Mode」ともに影響させたい。
・ 「Draw Mode」での描画は、直線ではなく、フリーハンドにしたい。
・ 「Draw Mode」での描画で、矢印を描けるようにしたい。


・Player名は書き換えられるようにしたい。
・プレイヤーの複数選択機能を追加したい。
・ 「オールコートモード」と「ハーフコートモード」を切り替えたい。
・ 「Undo」と「Redo」ボタンの適用範囲は「Move Mode」と「Draw Mode」ともに影響させたい。
・ 「Draw Mode」での描画は、直線ではなく、フリーハンドにしたい。
・ 「Draw Mode」での描画で、矢印を描けるようにしたい。
・画面下部に魔法の流れを動的に表現するエリアには魔法の「エクスペクト・パトローナム」が放出されているエフェクトを追加して